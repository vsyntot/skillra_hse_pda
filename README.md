# Skillra HSE PDA

Аналитика рынка IT-вакансий для карьерного навигатора Skillra. Проект следует ТЗ курса «Python для анализа данных» (этапы 0–4) и использует открытый словарь признаков HeadHunter.

## Установка и запуск пайплайна
1. Создайте окружение: `python -m venv .venv && source .venv/bin/activate`.
2. Установите зависимости: `pip install -r requirements.txt` или `pip install -e . -r requirements.txt` для editable-режима.
3. Убедитесь, что исходный файл лежит по умолчанию в `data/raw/hh_moscow_it_2025_11_30.csv` (не изменяйте raw-данные).
4. Постройте чистые и фичевые датасеты: `python scripts/run_pipeline.py` (результаты в `data/processed/hh_clean.parquet` и `hh_features.parquet`).
5. Быстрый регрессионный чек пайплайна: `python scripts/validate_pipeline.py`.
6. Прогон ноутбука end-to-end: `python scripts/validate_notebook.py` (использует `jupyter nbconvert --execute`).

## Запуск пайплайна
- Команда `python scripts/run_pipeline.py` прогоняет все стадии (загрузка → очистка → фичи → агрегации) и сохраняет три артефакта в `data/processed/`:
  - `hh_clean.parquet` — очищенный датасет после базовой обработки.
  - `hh_features.parquet` — обогащённые признаки для EDA и моделирования.
  - `market_view.parquet` — агрегации рынка по ролям/грейдам/городам (и домену, если есть), включая зарплаты, удалённость, junior-friendly и топ-навыки.

## Ноутбук и структура
- Основной отчёт: `notebooks/01_hse_project.ipynb` — строго следует этапам 0–4 (данные → предобработка → признаки → EDA → визуализации) и включает продуктовый слой с персонами.
- Все тяжёлые вычисления вынесены в `src/skillra_pda`, ноутбук переиспользует готовые функции и артефакты из `data/processed`.
- Фигуры сохраняются в `reports/figures` (требование AGENTS.md).

## Артефакты
- `data/processed/hh_clean.parquet` — очищенный датасет.
- `data/processed/hh_features.parquet` — обогащённые признаки (возраст вакансии, стековые счётчики, текстовые метрики, junior-friendly и др.).
- `data/processed/market_view.parquet` — агрегированный срез рынка с метриками по ролям/грейдам/городам/доменам.
- `reports/figures/*.png` — визуализации зарплат, форматов работы, навыковых тепловых карт и распределений.
- `scripts/run_pipeline.py`, `scripts/validate_notebook.py` — точки входа для воспроизводимости.

## Соответствие ТЗ курса
- Этап 0: описание источника и профиля данных — секция 1 ноутбука.
- Этап 1: предобработка (пропуски, дубликаты, булевые, зарплата) — секция 2.
- Этап 2: новые признаки (city_tier, work_mode, стековые агрегаты, тексты, vacancy_age_days) — секция 3.
- Этап 3: EDA (зарплаты, навыки, бенефиты, soft-skills, junior-friendly) — секция 4.
- Этап 4: визуализации (≥3 типов графиков, heatmap навыков) — секция 5.
- Дополнительно: продуктовый слой с персонами и skill-gap — секция 6.

## Связь с продуктом Skillra
- Карта рынка: зарплаты по грейдам/ролям/городам, форматы работы, востребованные навыки и бенефиты.
- Skill gap: анализ недостающих навыков для целевых персон (студент, свитчер, middle-аналитик).
- Встраиваемость: результаты пайплайна и ноутбука могут питать AI-агента Skillra (рекомендации по развитию и подбору вакансий).

### Market view для Skillra
`market_view.parquet` агрегирует рынок вакансий по роли, грейду, типу города и домену (если доступен), добавляя медианные/квартильные зарплаты, долю удалёнки, долю junior-friendly позиций, медианный размер техстека и топ-навыки с долями. Эти метрики позволяют продукту Skillra формировать навигацию по рынку (зарплатные ориентиры, дистанционный формат, требования к стеку) и питать рекомендации AI-агента для разных персон.

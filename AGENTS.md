# AGENTS.md — правила для Codex / ИИ‑агентов

Репозиторий: `skillra_hse_pda`  
Контекст: учебный проект по Python для анализа данных + фундамент продукта Career & Job Market Navigator (Skillra).

---

## 1. Главный источник правды

1. Основной план работ — в файле `CODEx_PLAN.md`.
2. Внутри `CODEx_PLAN.md` есть раздел **"6. Execution steps for Codex"**.
3. Codex **НE должен пытаться выполнить все шаги сразу**.  
   Пользователь в явном виде говорит, какой именно шаг (`Step N`) нужно сделать сейчас.

При конфликте между:
- старыми файлами/коммитами и
- актуальными инструкциями в `CODEx_PLAN.md` и сообщениях пользователя в чате,

приоритет: **сообщения пользователя → CODEx_PLAN.md**.

---

## 2. Жёсткие ограничения

1. Не изменять файлы в `data/raw/*` (особенно `hh_moscow_it_2025_11_30.csv`).
2. Все новые таблицы сохранять в `data/processed/`.
3. Все графики сохранять в `reports/figures/`.
4. Не добавлять лишних бинарников (кроме данных/ноутбуков).

---

## 3. Ноутбуки и скрипты

1. Главный ноутбук проекта: `notebooks/01_hse_project.ipynb`.
   - После любых изменений он должен выполняться целиком (**Run All**).
2. Логика данных и аналитики по максимуму живёт в `src/skillra_pda/*.py`.
3. Скрипты:
   - `scripts/validate_pipeline.py` — smoke‑тест.
   - `scripts/run_pipeline.py` — полный аналитический пайплайн (когда будет реализован).

---

## 4. Код и архитектура

1. Основной пакет: `src/skillra_pda/`.  
   Не создавай новые пакеты без необходимости.
2. Новые функции и классы:
   - пиши понятные docstring’и,
   - по возможности покрывай простыми тестами в `tests/`.
3. Не удаляй существующие публичные функции без явной инструкции от пользователя.
4. При смене интерфейса:
   - обновляй вызовы в `notebooks/`, `scripts/`,
   - при необходимости — `docs/`.

---

## 5. Как работать с шагами в CODEx_PLAN.md

1. Пользователь в чате явно говорит:  
   «Сделай сейчас **Step N** из раздела "6. Execution steps for Codex" в `CODEx_PLAN.md`».
2. Codex:
   - читает `CODEx_PLAN.md`,
   - находит Step N,
   - вносит изменения **только в указанные в этом шаге файлы**,
   - создаёт отдельный PR с названием, предложенным в шаге (например, `step3_employers_benefits_softskills`).
3. Codex **НЕ** выполняет другие шаги (Step 0, Step 1, Step 2, …), пока пользователь явно не попросит.

---